<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animals - Kevin Cotellesso</title>
    <link rel="stylesheet" href="../css/styles.css">

</head>

<body class="photography-page">
    <header>
        <nav>
            <div class="logo">
                <h1><a href="../index.html" style="color:white; text-decoration:none;">Kevin Cotellesso</a></h1>
            </div>
            <ul class="nav-links">
                <!-- Navigation generated by main.js interactively -->
            </ul>
            <div class="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
        </nav>
    </header>

    <div class="description-area">
        <h1>Animals</h1>
        <p>A collection of my favorite animal subjects, who never get tired of posing.</p>
    </div>

    <div class="slideshow-wrapper">
        <!-- Slides will be loaded dynamically -->

        <a class="prev" onclick="changeSlide(-1)">&#10094;</a>
        <a class="next" onclick="changeSlide(1)">&#10095;</a>
    </div>

    <div class="bottom-bar">
        &copy; Kevin Cotellesso
    </div>

    <script src="../js/config.js?v=2"></script>
    <script src="../js/main.js?v=2"></script>
    <script>
        // Dynamic Slideshow Script
        const imageDirectory = '../assets/images/photography/animals/';
        let slides = [];
        let currentSlide = 0;

        document.addEventListener('DOMContentLoaded', function () {
            loadImages();
        });

        async function loadImages() {
            try {
                // Fetch the manifest JSON instead of scraping the directory
                const response = await fetch(imageDirectory + 'manifest.json');
                const imageList = await response.json();

                const wrapper = document.querySelector('.slideshow-wrapper');
                // Keep the navigation buttons
                const prevBtn = wrapper.querySelector('.prev');
                const nextBtn = wrapper.querySelector('.next');

                // Clear existing slides (hardcoded ones)
                const existingSlides = wrapper.querySelectorAll('.slide');
                existingSlides.forEach(slide => slide.remove());

                let imageCount = 0;

                imageList.forEach(filename => {
                    // Check for valid extensions just in case (though manifest builder handles this)
                    if (filename.match(/\.(jpe?g|png|gif|webp)$/i)) {
                        const slide = document.createElement('div');
                        slide.className = 'slide';

                        const imgSrc = imageDirectory + filename;

                        const img = document.createElement('img');
                        img.src = imgSrc;
                        img.alt = "Animals";

                        slide.appendChild(img);
                        wrapper.insertBefore(slide, prevBtn); // Insert before buttons
                        imageCount++;
                    }
                });

                if (imageCount > 0) {
                    // Update slides NodeList
                    slides = wrapper.querySelectorAll('.slide');
                    showSlide(0);
                } else {
                    console.error("No images found in manifest.");
                }

            } catch (error) {
                console.error('Error loading images:', error);
            }
        }

        function showSlide(index) {
            if (slides.length === 0) return;

            slides.forEach(slide => slide.classList.remove('active'));

            // Loop functionality
            if (index >= slides.length) {
                currentSlide = 0;
            } else if (index < 0) {
                currentSlide = slides.length - 1;
            } else {
                currentSlide = index;
            }

            slides[currentSlide].classList.add('active');
        }

        function changeSlide(n) {
            showSlide(currentSlide + n);
        }

        // Keyboard navigation
        document.addEventListener('keydown', function (e) {
            if (e.key === 'ArrowRight') {
                changeSlide(1);
            } else if (e.key === 'ArrowLeft') {
                changeSlide(-1);
            }
        });


    </script>
</body>

</html>